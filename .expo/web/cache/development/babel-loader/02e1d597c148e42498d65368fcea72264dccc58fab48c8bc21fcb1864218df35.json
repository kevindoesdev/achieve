{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { TextInput as PaperTextInput } from \"react-native-paper\";\nimport { useState, useRef } from \"react\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var TextInput = function TextInput(_ref) {\n  var placeholder = _ref.placeholder,\n    text = _ref.text,\n    _onChangeText = _ref.onChangeText,\n    _onEndEditing = _ref.onEndEditing;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    editing = _useState2[0],\n    setEditing = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    valueSnapshot = _useState4[0],\n    setValueSnapshot = _useState4[1];\n  var _useState5 = useState(text),\n    _useState6 = _slicedToArray(_useState5, 2),\n    value = _useState6[0],\n    setValue = _useState6[1];\n  var inputRef = useRef(null);\n  return _jsx(PaperTextInput, {\n    placeholder: placeholder,\n    value: value,\n    mode: \"outlined\",\n    ref: inputRef,\n    outlineStyle: {\n      borderWidth: 0\n    },\n    style: {\n      backgroundColor: \"rgba(0, 0, 0, 0.0)\",\n      fontSize: 20\n    },\n    onFocus: function onFocus() {\n      setEditing(true);\n      setValueSnapshot(value);\n    },\n    onBlur: function onBlur() {\n      console.log('blur');\n      setEditing(false);\n      _onEndEditing(value);\n    },\n    onChangeText: function onChangeText(text) {\n      setValue(text);\n      _onChangeText(text);\n    },\n    onEndEditing: function onEndEditing() {\n      console.log('onEndEditing');\n      setEditing(false);\n      _onEndEditing(value);\n    },\n    left: _jsx(PaperTextInput.Icon, {\n      style: {\n        top: -8\n      },\n      icon: editing ? \"close\" : \"pencil\",\n      forceTextInputFocus: false,\n      onPress: editing ? function (event) {\n        setValue(valueSnapshot);\n        inputRef.current.blur();\n        event.stopPropagation();\n      } : function () {\n        inputRef.current.focus();\n      }\n    })\n  });\n};\nTextInput.defaultProps = {\n  onChangeText: function onChangeText() {},\n  onEndEditing: function onEndEditing() {}\n};\nexport default TextInput;","map":{"version":3,"names":["TextInput","PaperTextInput","useState","useRef","jsx","_jsx","_ref","placeholder","text","onChangeText","onEndEditing","_useState","_useState2","_slicedToArray","editing","setEditing","_useState3","_useState4","valueSnapshot","setValueSnapshot","_useState5","_useState6","value","setValue","inputRef","mode","ref","outlineStyle","borderWidth","style","backgroundColor","fontSize","onFocus","onBlur","console","log","left","Icon","top","icon","forceTextInputFocus","onPress","event","current","blur","stopPropagation","focus","defaultProps"],"sources":["/home/rocket/git/achieve/src/components/TextInput.tsx"],"sourcesContent":["import { TextInput as PaperTextInput } from \"react-native-paper\";\nimport { TextInput as RNTextInput } from \"react-native\";\nimport { useState, useRef } from \"react\";\n\ninterface Props {\n  placeholder?: string,\n  text: string,\n  onChangeText: (text: string) => void,\n  onEndEditing: (text: string) => void\n}\n\nexport const TextInput = ({ placeholder, text, onChangeText, onEndEditing }: Props) => {\n  const [editing, setEditing] = useState(false);\n  const [valueSnapshot, setValueSnapshot] = useState('');\n  const [value, setValue] = useState(text);\n  const inputRef = useRef<RNTextInput>(null);\n\n  return (\n    <PaperTextInput\n      placeholder={placeholder}\n      value={value}\n      mode=\"outlined\"\n      ref={inputRef}\n      outlineStyle={{ borderWidth: 0 }}\n      style={{\n        backgroundColor: \"rgba(0, 0, 0, 0.0)\",\n        fontSize: 20,\n      }}\n      onFocus={() => {\n        setEditing(true);\n        setValueSnapshot(value);\n      }}\n      onBlur={() => {\n        console.log('blur')\n        setEditing(false);\n        onEndEditing(value);\n      }}\n      onChangeText={(text) => {\n        setValue(text);\n        onChangeText(text);\n      }}\n      onEndEditing={() => {\n        console.log('onEndEditing')\n        setEditing(false);\n        onEndEditing(value);\n      }}\n      left={\n        <PaperTextInput.Icon\n          style={{ top: -8 }}\n          icon={editing ? \"close\" : \"pencil\"}\n          forceTextInputFocus={false}\n          onPress={\n            editing\n              ? (event) => {\n                  setValue(valueSnapshot);\n                  (inputRef as any).current.blur()\n                  event.stopPropagation();\n                }\n              : () => {\n                (inputRef as any).current.focus()\n              }\n          }\n        />\n      }\n    />\n  );\n};\n\nTextInput.defaultProps = {\n  onChangeText: () => {},\n  onEndEditing: () => {},\n};\n\nexport default TextInput;\n"],"mappings":";AAAA,SAASA,SAAS,IAAIC,cAAc,QAAQ,oBAAoB;AAEhE,SAASC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,GAAA,IAAAC,IAAA;AASzC,OAAO,IAAML,SAAS,GAAG,SAAZA,SAASA,CAAAM,IAAA,EAAiE;EAAA,IAA3DC,WAAW,GAAAD,IAAA,CAAXC,WAAW;IAAEC,IAAI,GAAAF,IAAA,CAAJE,IAAI;IAAEC,aAAY,GAAAH,IAAA,CAAZG,YAAY;IAAEC,aAAY,GAAAJ,IAAA,CAAZI,YAAY;EACvE,IAAAC,SAAA,GAA8BT,QAAQ,CAAC,KAAK,CAAC;IAAAU,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAtCG,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EAC1B,IAAAI,UAAA,GAA0Cd,QAAQ,CAAC,EAAE,CAAC;IAAAe,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA/CE,aAAa,GAAAD,UAAA;IAAEE,gBAAgB,GAAAF,UAAA;EACtC,IAAAG,UAAA,GAA0BlB,QAAQ,CAACM,IAAI,CAAC;IAAAa,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAAjCE,KAAK,GAAAD,UAAA;IAAEE,QAAQ,GAAAF,UAAA;EACtB,IAAMG,QAAQ,GAAGrB,MAAM,CAAc,IAAI,CAAC;EAE1C,OACEE,IAAA,CAACJ,cAAc;IACbM,WAAW,EAAEA,WAAY;IACzBe,KAAK,EAAEA,KAAM;IACbG,IAAI,EAAC,UAAU;IACfC,GAAG,EAAEF,QAAS;IACdG,YAAY,EAAE;MAAEC,WAAW,EAAE;IAAE,CAAE;IACjCC,KAAK,EAAE;MACLC,eAAe,EAAE,oBAAoB;MACrCC,QAAQ,EAAE;IACZ,CAAE;IACFC,OAAO,EAAE,SAAAA,QAAA,EAAM;MACbjB,UAAU,CAAC,IAAI,CAAC;MAChBI,gBAAgB,CAACG,KAAK,CAAC;IACzB,CAAE;IACFW,MAAM,EAAE,SAAAA,OAAA,EAAM;MACZC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACnBpB,UAAU,CAAC,KAAK,CAAC;MACjBL,aAAY,CAACY,KAAK,CAAC;IACrB,CAAE;IACFb,YAAY,EAAE,SAAAA,aAACD,IAAI,EAAK;MACtBe,QAAQ,CAACf,IAAI,CAAC;MACdC,aAAY,CAACD,IAAI,CAAC;IACpB,CAAE;IACFE,YAAY,EAAE,SAAAA,aAAA,EAAM;MAClBwB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;MAC3BpB,UAAU,CAAC,KAAK,CAAC;MACjBL,aAAY,CAACY,KAAK,CAAC;IACrB,CAAE;IACFc,IAAI,EACF/B,IAAA,CAACJ,cAAc,CAACoC,IAAI;MAClBR,KAAK,EAAE;QAAES,GAAG,EAAE,CAAC;MAAE,CAAE;MACnBC,IAAI,EAAEzB,OAAO,GAAG,OAAO,GAAG,QAAS;MACnC0B,mBAAmB,EAAE,KAAM;MAC3BC,OAAO,EACL3B,OAAO,GACH,UAAC4B,KAAK,EAAK;QACTnB,QAAQ,CAACL,aAAa,CAAC;QACtBM,QAAQ,CAASmB,OAAO,CAACC,IAAI,CAAC,CAAC;QAChCF,KAAK,CAACG,eAAe,CAAC,CAAC;MACzB,CAAC,GACD,YAAM;QACLrB,QAAQ,CAASmB,OAAO,CAACG,KAAK,CAAC,CAAC;MACnC;IACH,CACF;EACF,CACF,CAAC;AAEN,CAAC;AAED9C,SAAS,CAAC+C,YAAY,GAAG;EACvBtC,YAAY,EAAE,SAAAA,aAAA,EAAM,CAAC,CAAC;EACtBC,YAAY,EAAE,SAAAA,aAAA,EAAM,CAAC;AACvB,CAAC;AAED,eAAeV,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}