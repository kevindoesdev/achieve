{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Card, TextInput, Text, Chip, Portal, Dialog, Button } from \"react-native-paper\";\nimport { useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectTagById } from \"../tags/slice\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport var EditTodo = function EditTodo(_ref) {\n  var item = _ref.item;\n  var _useState = useState(item.label),\n    _useState2 = _slicedToArray(_useState, 2),\n    label = _useState2[0],\n    setLabel = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    notes = _useState4[0],\n    setNotes = _useState4[1];\n  return _jsxs(View, {\n    children: [_jsx(TextInput, {\n      style: style.input,\n      label: \"Label\",\n      value: label,\n      onChangeText: setLabel\n    }), _jsx(TagList, {\n      tags: item.tags\n    }), _jsx(TextInput, {\n      style: style.input,\n      label: \"Notes\",\n      value: notes,\n      onChangeText: setNotes,\n      multiline: true\n    })]\n  });\n};\nvar TagList = function TagList(_ref2) {\n  var tags = _ref2.tags;\n  return _jsxs(Card, {\n    mode: \"contained\",\n    style: [style.input, style.card],\n    children: [_jsx(Card.Content, {\n      style: style.cardContentTitle,\n      children: _jsx(Text, {\n        variant: \"labelMedium\",\n        children: \"Tags\"\n      })\n    }), _jsx(Card.Content, {\n      children: _jsxs(View, {\n        style: {\n          flexDirection: 'row'\n        },\n        children: [tags.map(function (tag) {\n          return _jsx(Tag, {\n            id: tag\n          }, tag);\n        }), _jsx(AddChip, {})]\n      })\n    })]\n  });\n};\nvar Tag = function Tag(_ref3) {\n  var id = _ref3.id;\n  var tag = useSelector(function (state) {\n    return selectTagById(state, id);\n  });\n  return _jsx(CommonChip, {\n    value: tag.label,\n    onClose: function onClose() {\n      console.log('close');\n    }\n  });\n};\nvar CommonChip = function CommonChip(props) {\n  return _jsx(Chip, _objectSpread(_objectSpread({}, props), {}, {\n    style: {\n      marginRight: 4\n    },\n    compact: true,\n    elevated: true,\n    mode: \"outlined\",\n    children: props.value\n  }));\n};\nvar AddChip = function AddChip() {\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    dialogVisible = _useState6[0],\n    setDialogVisible = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    tag = _useState8[0],\n    setTag = _useState8[1];\n  var inputRef = useRef(null);\n  var showDialog = function showDialog() {\n    setDialogVisible(true);\n    setTimeout(function () {\n      var _inputRef$current;\n      return (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.focus();\n    }, 10);\n  };\n  var hideDialog = function hideDialog() {\n    setTag('');\n    setDialogVisible(false);\n  };\n  var addTag = function addTag(text) {\n    console.log('Setting tag', text);\n    hideDialog();\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsx(CommonChip, {\n      icon: \"plus-circle\",\n      value: \"Add new tag...\",\n      onPress: showDialog\n    }), _jsx(Portal, {\n      children: _jsxs(Dialog, {\n        visible: dialogVisible,\n        onDismiss: hideDialog,\n        children: [_jsxs(Dialog.Content, {\n          children: [_jsx(Text, {\n            variant: \"bodyMedium\",\n            children: \"Enter a tag name\"\n          }), _jsx(TextInput, {\n            ref: inputRef,\n            dense: true,\n            value: tag,\n            onChangeText: setTag\n          })]\n        }), _jsxs(Dialog.Actions, {\n          children: [_jsx(Button, {\n            onPress: hideDialog,\n            children: \"Cancel\"\n          }), _jsx(Button, {\n            onPress: function onPress() {\n              return addTag(tag);\n            },\n            children: \"Ok\"\n          })]\n        })]\n      })\n    })]\n  });\n};\nvar style = StyleSheet.create({\n  input: {\n    margin: 8,\n    borderRadius: 4\n  },\n  card: {\n    borderBottomColor: 'rgb(28, 27, 31)',\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 0,\n    borderBottomWidth: 1\n  },\n  cardContentTitle: {\n    paddingTop: 8,\n    marginBottom: 4\n  }\n});","map":{"version":3,"names":["Card","TextInput","Text","Chip","Portal","Dialog","Button","useRef","useState","useSelector","selectTagById","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditTodo","_ref","item","_useState","label","_useState2","_slicedToArray","setLabel","_useState3","_useState4","notes","setNotes","View","children","style","input","value","onChangeText","TagList","tags","multiline","_ref2","mode","card","Content","cardContentTitle","variant","flexDirection","map","tag","Tag","id","AddChip","_ref3","state","CommonChip","onClose","console","log","props","_objectSpread","marginRight","compact","elevated","_useState5","_useState6","dialogVisible","setDialogVisible","_useState7","_useState8","setTag","inputRef","showDialog","setTimeout","_inputRef$current","current","focus","hideDialog","addTag","text","icon","onPress","visible","onDismiss","ref","dense","Actions","StyleSheet","create","margin","borderRadius","borderBottomColor","borderBottomLeftRadius","borderBottomRightRadius","borderBottomWidth","paddingTop","marginBottom"],"sources":["/home/rocket/git/achieve/src/features/todos/EditTodo.tsx"],"sourcesContent":["import { View, StyleSheet } from \"react-native\"\nimport { Id, Todo } from \"../../types\"\nimport { Card, List, TextInput, Text, Chip, Portal, Dialog, Button } from \"react-native-paper\"\nimport { useEffect, useRef, useState } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { selectTagById } from \"../tags/slice\"\nimport { RootState } from \"../../store\"\nimport { TextInput as RNTextInput } from \"react-native\";\n\ninterface Props {\n  item: Todo\n}\n\nexport const EditTodo = ({item}: Props) => {\n  \n  const [label, setLabel] = useState(item.label)\n  const [notes, setNotes] = useState('')\n  \n  return (\n    <View>\n      <TextInput style={style.input} label=\"Label\" value={label} onChangeText={setLabel}/>\n      <TagList tags={item.tags}/>\n      <TextInput style={style.input} label=\"Notes\" value={notes} onChangeText={setNotes} multiline={true} />\n    </View>)\n}\n\ninterface TagListProps {\n  tags: Id[]\n}\n\nconst TagList = ({ tags }: TagListProps) => {\n  \n    \n  return (\n    <Card mode=\"contained\" style={[style.input, style.card]}>\n      <Card.Content style={style.cardContentTitle}>\n        <Text variant=\"labelMedium\">Tags</Text>\n      </Card.Content>\n      <Card.Content>\n        <View style={{ flexDirection:'row' }}>\n          {tags.map(tag => <Tag key={tag} id={tag} />)}\n          <AddChip />\n        </View>\n      </Card.Content>\n    </Card>\n  )\n};\n\ninterface TagProps {\n  id: Id\n}\n\nconst Tag = ({ id }: TagProps) => {\n  \n  const tag = useSelector((state: RootState) => selectTagById(state, id));\n  \n  return (\n    <CommonChip\n      value={tag.label}\n      onClose={() => { console.log('close') }}\n    />\n  );\n}\n\ninterface MyChipProps {\n  onClose?: () => void\n  onPress?: () => void,\n  icon?: string\n  value: string\n}\n\nconst CommonChip = (props: MyChipProps) => (  \n  <Chip\n      { ...props }\n      style={{marginRight: 4}}\n      compact={true}\n      elevated={true}\n      mode='outlined'\n    >\n      {props.value}\n  </Chip> \n)\n\nconst AddChip = () => {\n  \n  const [dialogVisible, setDialogVisible] = useState(false);\n  const [tag, setTag] = useState('');\n  const inputRef = useRef<RNTextInput>(null);\n\n  const showDialog = () => {\n    setDialogVisible(true)\n    setTimeout(() => inputRef.current?.focus(), 10);\n  }\n\n  const hideDialog = () => {\n    setTag('');\n    setDialogVisible(false)\n  }\n  const addTag = (text: string) => {\n    // dispatch upsert tag \n    console.log('Setting tag', text)\n    hideDialog();\n  }\n\n  return (\n    <>\n      <CommonChip\n        icon='plus-circle'\n        value=\"Add new tag...\"\n        onPress={showDialog}\n      /> \n      <Portal>\n        <Dialog visible={dialogVisible} onDismiss={hideDialog}>\n        <Dialog.Content>\n          <Text variant=\"bodyMedium\">Enter a tag name</Text>\n          <TextInput ref={inputRef} dense={true} value={tag} onChangeText={setTag}/>\n        </Dialog.Content>\n          <Dialog.Actions>\n            <Button onPress={hideDialog}>Cancel</Button>\n            <Button onPress={() => addTag(tag)}>Ok</Button>\n          </Dialog.Actions>\n        </Dialog>\n      </Portal>\n    </>\n  )\n}\n\nconst style = StyleSheet.create({\n  input: { \n    margin: 8,\n    borderRadius: 4\n  },\n  card: {\n    borderBottomColor: 'rgb(28, 27, 31)',\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 0,\n    borderBottomWidth: 1,\n  },\n  cardContentTitle: {\n    paddingTop: 8,\n    marginBottom: 4\n  }\n\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}