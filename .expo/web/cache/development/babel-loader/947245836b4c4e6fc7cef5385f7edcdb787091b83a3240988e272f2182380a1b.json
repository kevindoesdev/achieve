{"ast":null,"code":"import { createSlice, nanoid } from '@reduxjs/toolkit';\nimport { notEmpty, toIndexOf } from \"../../utils\";\nimport { initialState as tagState, selectTagByValue } from \"../tags/slice\";\nvar getTagIds = function getTagIds() {\n  for (var _len = arguments.length, tags = new Array(_len), _key = 0; _key < _len; _key++) {\n    tags[_key] = arguments[_key];\n  }\n  return tags.map(function (tag) {\n    var _selectTagByValue;\n    return (_selectTagByValue = selectTagByValue(tagState, tag)) == null ? void 0 : _selectTagByValue.id;\n  }).filter(notEmpty);\n};\nexport var initialState = {\n  items: toIndexOf([{\n    id: nanoid(),\n    label: \"This is the first item\",\n    tags: getTagIds('First tag', 'Second')\n  }, {\n    id: nanoid(),\n    label: \"This is the second item\",\n    tags: getTagIds('First tag')\n  }, {\n    id: nanoid(),\n    label: \"This is the third item\",\n    tags: []\n  }])\n};\nvar slice = createSlice({\n  name: 'todos',\n  initialState: initialState,\n  reducers: {\n    beginEdit: {\n      reducer: function reducer(state, action) {\n        state.editing = selectTodoById(state, action.payload);\n      },\n      prepare: function prepare(id) {\n        return {\n          payload: id\n        };\n      }\n    }\n  }\n});\nvar getTodoState = function getTodoState(state) {\n  return state.todos || state;\n};\nexport var selectTodos = function selectTodos(state) {\n  var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Object.values(getTodoState(state).items);\n};\nexport var selectTodoById = function selectTodoById(state, id) {\n  return getTodoState(state).items[id];\n};\nexport default slice.reducer;","map":{"version":3,"names":["createSlice","nanoid","notEmpty","toIndexOf","initialState","tagState","selectTagByValue","getTagIds","_len","arguments","length","tags","Array","_key","map","tag","_selectTagByValue","id","filter","items","label","slice","name","reducers","beginEdit","reducer","state","action","editing","selectTodoById","payload","prepare","getTodoState","todos","selectTodos","undefined","Object","values"],"sources":["/home/rocket/git/achieve/src/features/todos/slice.ts"],"sourcesContent":["import { PayloadAction, createSlice, nanoid } from '@reduxjs/toolkit'\nimport { RootState } from '../../store'\nimport { Id, IndexOf, Todo } from '../../types';\nimport { notEmpty, toIndexOf } from '../../utils';\nimport { initialState as tagState, selectTagByValue } from '../tags/slice'\n\n\nexport interface TodoState {\n  items: IndexOf<Todo>,\n  editing?: Todo\n} \n\nconst getTagIds = (...tags: string[]): Id[] => tags.map(tag => selectTagByValue(tagState, tag)?.id).filter(notEmpty)\n\nexport const initialState: TodoState = {\n  items: toIndexOf([\n    {\n      id: nanoid(),\n      label: \"This is the first item\",\n      tags: getTagIds('First tag', 'Second')\n    },\n    {\n      id: nanoid(),\n      label: \"This is the second item\",\n      tags: getTagIds('First tag')\n    },\n    {\n      id: nanoid(),\n      label: \"This is the third item\",\n      tags: []\n    }\n  ])\n}\n\nconst slice = createSlice({\n  name: 'todos',\n  initialState,\n  reducers: {\n    beginEdit: {\n      reducer: (state, action: PayloadAction<Id>) => {\n        state.editing = selectTodoById(state, action.payload)\n      },\n      prepare: (id: Id) => {\n        return { payload: id }\n      }\n    }\n  }\n})\n\ntype State = RootState | TodoState;\n\nconst getTodoState = (state: State): TodoState => (state as any).todos || state;\n\nexport interface TodoFilter {}\n\nexport const selectTodos = (state: State, filter: TodoFilter = {}) => Object.values(getTodoState(state).items);\n\nexport const selectTodoById = (state: State, id: Id) => getTodoState(state).items[id]\n\n//export const { postAdded, postUpdated, reactionAdded } = postsSlice.actions\n\nexport default slice.reducer\n"],"mappings":"AAAA,SAAwBA,WAAW,EAAEC,MAAM,QAAQ,kBAAkB;AAGrE,SAASC,QAAQ,EAAEC,SAAS;AAC5B,SAASC,YAAY,IAAIC,QAAQ,EAAEC,gBAAgB;AAQnD,IAAMC,SAAS,GAAG,SAAZA,SAASA,CAAA;EAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAOC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;IAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;EAAA;EAAA,OAAqBF,IAAI,CAACG,GAAG,CAAC,UAAAC,GAAG;IAAA,IAAAC,iBAAA;IAAA,QAAAA,iBAAA,GAAIV,gBAAgB,CAACD,QAAQ,EAAEU,GAAG,CAAC,qBAA/BC,iBAAA,CAAiCC,EAAE;EAAA,EAAC,CAACC,MAAM,CAAChB,QAAQ,CAAC;AAAA;AAEpH,OAAO,IAAME,YAAuB,GAAG;EACrCe,KAAK,EAAEhB,SAAS,CAAC,CACf;IACEc,EAAE,EAAEhB,MAAM,CAAC,CAAC;IACZmB,KAAK,EAAE,wBAAwB;IAC/BT,IAAI,EAAEJ,SAAS,CAAC,WAAW,EAAE,QAAQ;EACvC,CAAC,EACD;IACEU,EAAE,EAAEhB,MAAM,CAAC,CAAC;IACZmB,KAAK,EAAE,yBAAyB;IAChCT,IAAI,EAAEJ,SAAS,CAAC,WAAW;EAC7B,CAAC,EACD;IACEU,EAAE,EAAEhB,MAAM,CAAC,CAAC;IACZmB,KAAK,EAAE,wBAAwB;IAC/BT,IAAI,EAAE;EACR,CAAC,CACF;AACH,CAAC;AAED,IAAMU,KAAK,GAAGrB,WAAW,CAAC;EACxBsB,IAAI,EAAE,OAAO;EACblB,YAAY,EAAZA,YAAY;EACZmB,QAAQ,EAAE;IACRC,SAAS,EAAE;MACTC,OAAO,EAAE,SAAAA,QAACC,KAAK,EAAEC,MAAyB,EAAK;QAC7CD,KAAK,CAACE,OAAO,GAAGC,cAAc,CAACH,KAAK,EAAEC,MAAM,CAACG,OAAO,CAAC;MACvD,CAAC;MACDC,OAAO,EAAE,SAAAA,QAACd,EAAM,EAAK;QACnB,OAAO;UAAEa,OAAO,EAAEb;QAAG,CAAC;MACxB;IACF;EACF;AACF,CAAC,CAAC;AAIF,IAAMe,YAAY,GAAG,SAAfA,YAAYA,CAAIN,KAAY;EAAA,OAAiBA,KAAK,CAASO,KAAK,IAAIP,KAAK;AAAA;AAI/E,OAAO,IAAMQ,WAAW,GAAG,SAAdA,WAAWA,CAAIR,KAAY;EAAA,IAAER,MAAkB,GAAAT,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAA0B,SAAA,GAAA1B,SAAA,MAAG,CAAC,CAAC;EAAA,OAAK2B,MAAM,CAACC,MAAM,CAACL,YAAY,CAACN,KAAK,CAAC,CAACP,KAAK,CAAC;AAAA;AAE9G,OAAO,IAAMU,cAAc,GAAG,SAAjBA,cAAcA,CAAIH,KAAY,EAAET,EAAM;EAAA,OAAKe,YAAY,CAACN,KAAK,CAAC,CAACP,KAAK,CAACF,EAAE,CAAC;AAAA;AAIrF,eAAeI,KAAK,CAACI,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}