{"ast":null,"code":"import { createSlice, nanoid } from '@reduxjs/toolkit';\nimport { toIndexOf } from \"../../utils\";\nexport var initialState = {\n  items: toIndexOf([{\n    id: nanoid(),\n    label: \"First tag\"\n  }, {\n    id: nanoid(),\n    label: \"Second\"\n  }])\n};\nvar slice = createSlice({\n  name: 'tags',\n  initialState: initialState,\n  reducers: {\n    addTag: {\n      reducer: function reducer(state, action) {\n        var tag = selectTagByValue(state, action.payload.label);\n        if (!tag) {\n          state.items[action.payload.id] = action.payload;\n        }\n      },\n      prepare: function prepare(label) {\n        return {\n          payload: {\n            id: nanoid(),\n            label: label\n          }\n        };\n      }\n    }\n  }\n});\nvar getTagState = function getTagState(state) {\n  return state.tags || state;\n};\nexport var selectTags = function selectTags(state) {\n  return Object.values(getTagState(state).items);\n};\nexport var selectTagById = function selectTagById(state, id) {\n  return getTagState(state).items[id];\n};\nexport var selectTagByValue = function selectTagByValue(state, label) {\n  return Object.values(getTagState(state).items).find(function (tag) {\n    return tag.label === label;\n  });\n};\nexport default slice.reducer;","map":{"version":3,"names":["createSlice","nanoid","toIndexOf","initialState","items","id","label","slice","name","reducers","addTag","reducer","state","action","tag","selectTagByValue","payload","prepare","getTagState","tags","selectTags","Object","values","selectTagById","find"],"sources":["/home/rocket/git/achieve/src/features/tags/slice.ts"],"sourcesContent":["import { PayloadAction, createSlice, nanoid } from '@reduxjs/toolkit'\nimport { RootState } from '../../store'\nimport { Id, IndexOf, Tag } from '../../types';\nimport { toIndexOf } from '../../utils';\n\nexport interface TagState {\n  items: IndexOf<Tag>\n} \n\nexport const initialState: TagState = {\n  items: toIndexOf([\n    {\n      id: nanoid(),\n      label: \"First tag\",\n    },\n    {\n      id: nanoid(),\n      label: \"Second\"\n    }\n  ])\n}\n\nconst slice = createSlice({\n  name: 'tags',\n  initialState,\n  reducers: {\n    addTag: {\n      reducer: (state, action: PayloadAction<Tag>) => {\n        const tag = selectTagByValue(state, action.payload.label);\n\n        if (!tag) {\n          state.items[action.payload.id] = action.payload\n        }\n      },\n      prepare: (label: string) => {\n        return {\n          payload: {\n            id: nanoid(),\n            label\n          }\n        }\n      },\n    }\n  }\n})\n\ntype State = RootState | TagState;\n\nconst getTagState = (state: State): TagState => (state as any).tags || state;\n\nexport const selectTags = (state: State) => Object.values(getTagState(state).items);\n\nexport const selectTagById = (state: State, id: Id) => getTagState(state).items[id];\n\nexport const selectTagByValue = (state: State, label: string) =>\n  Object.values(getTagState(state).items).find((tag) => tag.label === label);\n\n  \nexport default slice.reducer\n//export const { postAdded, postUpdated, reactionAdded } = postsSlice.actions\n\n\n"],"mappings":"AAAA,SAAwBA,WAAW,EAAEC,MAAM,QAAQ,kBAAkB;AAGrE,SAASC,SAAS;AAMlB,OAAO,IAAMC,YAAsB,GAAG;EACpCC,KAAK,EAAEF,SAAS,CAAC,CACf;IACEG,EAAE,EAAEJ,MAAM,CAAC,CAAC;IACZK,KAAK,EAAE;EACT,CAAC,EACD;IACED,EAAE,EAAEJ,MAAM,CAAC,CAAC;IACZK,KAAK,EAAE;EACT,CAAC,CACF;AACH,CAAC;AAED,IAAMC,KAAK,GAAGP,WAAW,CAAC;EACxBQ,IAAI,EAAE,MAAM;EACZL,YAAY,EAAZA,YAAY;EACZM,QAAQ,EAAE;IACRC,MAAM,EAAE;MACNC,OAAO,EAAE,SAAAA,QAACC,KAAK,EAAEC,MAA0B,EAAK;QAC9C,IAAMC,GAAG,GAAGC,gBAAgB,CAACH,KAAK,EAAEC,MAAM,CAACG,OAAO,CAACV,KAAK,CAAC;QAEzD,IAAI,CAACQ,GAAG,EAAE;UACRF,KAAK,CAACR,KAAK,CAACS,MAAM,CAACG,OAAO,CAACX,EAAE,CAAC,GAAGQ,MAAM,CAACG,OAAO;QACjD;MACF,CAAC;MACDC,OAAO,EAAE,SAAAA,QAACX,KAAa,EAAK;QAC1B,OAAO;UACLU,OAAO,EAAE;YACPX,EAAE,EAAEJ,MAAM,CAAC,CAAC;YACZK,KAAK,EAALA;UACF;QACF,CAAC;MACH;IACF;EACF;AACF,CAAC,CAAC;AAIF,IAAMY,WAAW,GAAG,SAAdA,WAAWA,CAAIN,KAAY;EAAA,OAAgBA,KAAK,CAASO,IAAI,IAAIP,KAAK;AAAA;AAE5E,OAAO,IAAMQ,UAAU,GAAG,SAAbA,UAAUA,CAAIR,KAAY;EAAA,OAAKS,MAAM,CAACC,MAAM,CAACJ,WAAW,CAACN,KAAK,CAAC,CAACR,KAAK,CAAC;AAAA;AAEnF,OAAO,IAAMmB,aAAa,GAAG,SAAhBA,aAAaA,CAAIX,KAAY,EAAEP,EAAM;EAAA,OAAKa,WAAW,CAACN,KAAK,CAAC,CAACR,KAAK,CAACC,EAAE,CAAC;AAAA;AAEnF,OAAO,IAAMU,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIH,KAAY,EAAEN,KAAa;EAAA,OAC1De,MAAM,CAACC,MAAM,CAACJ,WAAW,CAACN,KAAK,CAAC,CAACR,KAAK,CAAC,CAACoB,IAAI,CAAC,UAACV,GAAG;IAAA,OAAKA,GAAG,CAACR,KAAK,KAAKA,KAAK;EAAA,EAAC;AAAA;AAG5E,eAAeC,KAAK,CAACI,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}